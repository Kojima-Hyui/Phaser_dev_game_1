# サイバーパンク・ローグライトシューター

Phaser3とTypeScriptで開発する2Dローグライトシューティングゲーム

## プロジェクト概要

SF・サイバーパンクをテーマとした2Dトップダウンビューのローグライトシューター。幾何学形状を用いたミニマルなビジュアルデザインで、ゲームシステムの実装に集中した趣味プロジェクト。

## 開発環境

- **ゲームエンジン**: Phaser 3.87.0
- **言語**: TypeScript 5.7.0
- **ビルドツール**: Vite 6.0.0
- **Node.js**: v22.21.1
- **npm**: 11.4.0

## セットアップ

### 依存関係のインストール

```bash
npm install
```

### 開発サーバーの起動

```bash
npm run dev
```

ブラウザが自動的に開き、`http://localhost:3000`でゲームが起動します。

### ビルド（本番環境用）

```bash
npm run build
```

ビルドされたファイルは`dist/`ディレクトリに出力されます。

### プレビュー

```bash
npm run preview
```

## 操作方法

- **WASD**: プレイヤー移動
- **マウス**: 照準
- **スペースキー または マウスクリック**: 射撃
- **R**: ゲームオーバー後の再スタート
- **1-5**: 武器切り替え

## フェーズ1 プロトタイプの実装内容

### 実装済み機能

✅ **基本操作**
- WASD/矢印キーによる8方向移動
- マウスによる照準と回転
- スペースキー/マウスクリックによる射撃

✅ **プレイヤーシステム**
- 三角形で表現されたプレイヤー
- HP管理システム
- ダメージ処理と視覚的フィードバック
- クールダウン付き射撃システム

✅ **敵AIシステム**
- 四角形で表現された敵
- プレイヤーへの追跡AI
- HP管理とダメージ処理
- 自動スポーン機能

✅ **弾丸システム**
- 緑色の円形弾丸
- 物理演算による移動
- 寿命管理（2秒後に自動消滅）
- 敵との衝突判定

✅ **UIシステム**
- HPバー表示
- スコア表示
- 操作説明の表示

✅ **ゲームループ**
- 敵を倒すとスコア加算
- プレイヤーのHP管理
- ゲームオーバー処理
- リスタート機能（Rキー）

### ビジュアルデザイン

サイバーパンク風のカラーパレット:
- **背景**: 暗い青黒（#0a0a14）
- **プレイヤー**: シアン（#00ffff）
- **敵**: マゼンタ（#ff0066）
- **弾丸**: グリーン（#00ff00）

## プロジェクト構造

```
Phaser_Dev_Game_1/
├── src/
│   ├── config/
│   │   └── gameConfig.ts      # Phaser設定
│   ├── entities/
│   │   ├── Player.ts          # プレイヤークラス（武器・アイテム対応）
│   │   ├── Enemy.ts           # 敵クラス（複数タイプ対応）
│   │   ├── Bullet.ts          # プレイヤー弾丸クラス（貫通対応）
│   │   ├── EnemyBullet.ts     # 敵弾丸クラス
│   │   ├── Wall.ts            # 障害物クラス
│   │   ├── Weapon.ts          # 武器クラス
│   │   ├── Item.ts            # パッシブアイテムクラス
│   │   └── Credit.ts          # 通貨クラス
│   ├── managers/
│   │   └── MapGenerator.ts    # マップ生成マネージャー
│   ├── scenes/
│   │   ├── BootScene.ts       # 初期化シーン
│   │   ├── GameScene.ts       # メインゲームシーン
│   │   └── UIScene.ts         # UI表示シーン
│   ├── utils/
│   │   └── Constants.ts       # ゲーム定数（武器・アイテム設定）
│   └── main.ts                # エントリーポイント
├── index.html                 # HTMLテンプレート
├── package.json               # プロジェクト設定
├── tsconfig.json              # TypeScript設定
├── vite.config.ts             # Vite設定
└── 企画書_20260204_4.md       # プロジェクト企画書
```

## フェーズ2 ゲームループ確立 ✅

### 実装済み機能

✅ **オープンエリア型マップ生成**
- 2400x1600の広大なマップ
- ランダム配置される30個の障害物
- マップ境界壁
- プレイヤー初期位置周辺の安全地帯
- カメラのスムーズな追従システム
- 弾丸と障害物の衝突判定

✅ **複数の敵タイプ（4種類）**
- **Chaser（追跡型）**: 基本的な敵、プレイヤーを追跡（マゼンタ・四角形）
- **Shooter（射撃型）**: 一定距離を保ちながら弾を撃つ（オレンジ・六角形）
- **Speedy（高速型）**: 素早く動く敵、HPが低い（イエロー・三角形）
- **Tank（タンク型）**: HPが高く遅い敵、高ダメージ（パープル・八角形）
- 各敵タイプ固有の行動パターンとビジュアル
- 敵の弾丸システム（Shooterタイプ）
- タイプ別のスコア配分

✅ **レベルアップシステム**
- 経験値システム（敵を倒すとEXP獲得）
- レベル管理とレベルアップ判定
- レベルアップ時のステータス上昇:
  - 最大HP +20
  - 攻撃力 +10%
  - 移動速度 +10
  - HPの全回復
- レベルアップ時のビジュアルエフェクト
- UIに経験値バーとレベル表示

✅ **ゲームバランス調整**
- 初期敵数を5→8に増加
- 最大敵数を20→25に増加
- デバッグモード追加（DEBUG_MODE設定）

### 更新されたビジュアルデザイン

サイバーパンク風のカラーパレット:
- **背景**: 暗い青黒（#0a0a14）
- **プレイヤー**: シアン（#00ffff）
- **敵 Chaser**: マゼンタ（#ff0066）
- **敵 Shooter**: オレンジ（#ff6600）
- **敵 Speedy**: イエロー（#ffff00）
- **敵 Tank**: パープル（#ff00ff）
- **弾丸**: グリーン（#00ff00）
- **壁**: グレー（#4a4a5a）

## フェーズ3 成長システム実装 ✅

### 実装済み機能

✅ **武器システム（5種類）**
- **Pistol（ピストル）**: バランス型の基本武器（緑）
- **Shotgun（ショットガン）**: 5発の散弾、近距離特化（オレンジ）
- **Rifle（ライフル）**: 高速連射、中ダメージ（シアン）
- **Sniper（スナイパー）**: 高ダメージ、貫通弾、低連射（パープル）
- **Laser（レーザー）**: 中ダメージ、貫通弾、中連射（マゼンタ）
- 数字キー1-5で武器切り替え
- 各武器固有のパラメータ（ダメージ、連射速度、弾速、貫通）
- 武器名のUI表示

✅ **パッシブアイテムシステム（5種類）**
- **Speed Boost**: 移動速度 +30（イエロー）
- **Damage Up**: 攻撃力 +20%（マゼンタ）
- **Max HP Up**: 最大HP +30（グリーン）
- **Fire Rate Up**: 連射速度 +15%（シアン）
- **Armor**: ダメージ軽減 10%（グレー）
- 敵撃破時にランダムドロップ
- ダイヤモンド形状で表現
- 浮遊・回転アニメーション
- 効果の累積システム

✅ **通貨システム**
- クレジット（通貨）の実装
- 敵撃破時に30%の確率でドロップ
- LocalStorageによる永続化
- 現在のクレジットと総クレジットの表示
- コイン形状のビジュアル
- 浮遊アニメーション

### 更新されたビジュアルデザイン

**アイテム・通貨カラー:**
- **Speed Boost**: イエロー（#ffff00）
- **Damage Up**: マゼンタ（#ff0066）
- **Max HP Up**: グリーン（#00ff00）
- **Fire Rate Up**: シアン（#00ffff）
- **Armor**: グレー（#aaaaaa）
- **Credit**: ゴールド（#ffff00）

## 次のステップ（フェーズ4）

- [ ] コンテンツ拡充（武器・敵の追加）
- [ ] ボスエネミーの実装
- [ ] アップグレードメニューシステム
- [ ] ステージバリエーション
- [ ] サウンドエフェクトの追加

## 開発方針

- **Small Scope, Big Fun**: 機能は少なく、楽しさは大きく
- **Iterate Early**: 早めにプレイ可能な状態を作り、反復改善
- **Done is Better than Perfect**: 完璧より完成を優先

## ライセンス

MIT License

---

**企画作成日**: 2026年2月4日
**開発ステータス**: フェーズ3（成長システム実装）完成

## 他の人にテストしてもらう方法

### 方法1: GitHub Pages（推奨）

1. **GitHubリポジトリを作成**
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   git branch -M main
   git remote add origin https://github.com/YOUR_USERNAME/YOUR_REPO_NAME.git
   git push -u origin main
   ```

2. **GitHub Pagesを有効化**
   - GitHubのリポジトリページで「Settings」→「Pages」
   - Source: 「GitHub Actions」を選択
   - 自動的にデプロイが開始されます

3. **URLを共有**
   - デプロイ後、`https://YOUR_USERNAME.github.io/YOUR_REPO_NAME/` でアクセス可能
   - このURLをテスターに共有

### 方法2: itch.io（ゲーム配信サイト）

1. **ビルド**
   ```bash
   npm run build
   ```

2. **distフォルダをZIP化**
   ```bash
   # Windowsの場合
   Compress-Archive -Path dist\* -DestinationPath game.zip
   ```

3. **itch.ioにアップロード**
   - https://itch.io でアカウント作成
   - 「Upload new project」→ ZIPファイルをアップロード
   - 「This file will be played in the browser」にチェック
   - URLを共有

### 方法3: ローカル配布

**ビルドしたファイルを配布:**
```bash
npm run build
```

distフォルダをZIP化してテスターに送信。テスターは以下を実行：
```bash
# distフォルダを解凍後
npx http-server dist
```

**または、リポジトリをクローン:**
```bash
git clone YOUR_REPO_URL
cd YOUR_REPO_NAME
npm install
npm run dev
```

## デバッグモード

デバッグモードを有効にするには、`src/utils/Constants.ts`の`GAME.DEBUG_MODE`を`true`に設定してください。デバッグモードでは物理エンジンの衝突ボックスが表示されます。

```typescript
export const GAME = {
  INITIAL_ENEMY_COUNT: 8,
  MAX_ENEMIES: 25,
  DEBUG_MODE: true  // デバッグモード有効化
};
```
