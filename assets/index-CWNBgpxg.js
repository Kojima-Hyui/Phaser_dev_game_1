import{r as v,g as B}from"./phaser-Czz4FBZH.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=e(i);fetch(i.href,a)}})();var D=v();const h=B(D);class W extends h.Scene{constructor(){super({key:"BootScene"})}preload(){}create(){this.scene.start("GameScene"),this.scene.launch("UIScene")}}const w=1280,L=720,y={BACKGROUND:657940,PLAYER:65535,ENEMY:16711782,BULLET:65280,HEALTH_BAR:16711782,HEALTH_BAR_BG:3355443,WALL:4868698,WALL_OUTLINE:9079466},c={SPEED:250,SIZE:20,MAX_HEALTH:100,INITIAL_LEVEL:1,EXP_TO_NEXT_LEVEL_BASE:100,EXP_MULTIPLIER:1.5,LEVEL_UP_HP_GAIN:20,LEVEL_UP_DAMAGE_MULTIPLIER:.1,LEVEL_UP_SPEED_GAIN:10},S={SPAWN_DISTANCE:400,SHOOT_RANGE:350,SHOOT_COOLDOWN:1500};var n=(l=>(l.CHASER="chaser",l.SHOOTER="shooter",l.SPEEDY="speedy",l.TANK="tank",l))(n||{});const k={chaser:{speed:100,health:30,damage:10,size:16,color:16711782,score:10},shooter:{speed:60,health:25,damage:8,size:14,color:16737792,score:15},speedy:{speed:180,health:15,damage:5,size:12,color:16776960,score:20},tank:{speed:50,health:80,damage:15,size:24,color:16711935,score:30}},I={SIZE:4,DAMAGE:15,LIFETIME:2e3};var d=(l=>(l.PISTOL="pistol",l.SHOTGUN="shotgun",l.RIFLE="rifle",l.SNIPER="sniper",l.LASER="laser",l))(d||{});const N={pistol:{name:"Pistol",damage:15,fireRate:200,bulletSpeed:500,bulletSize:4,bulletCount:1,spread:0,penetration:!1,color:65280},shotgun:{name:"Shotgun",damage:8,fireRate:600,bulletSpeed:400,bulletSize:3,bulletCount:5,spread:.3,penetration:!1,color:16737792},rifle:{name:"Rifle",damage:12,fireRate:100,bulletSpeed:600,bulletSize:3,bulletCount:1,spread:0,penetration:!1,color:65535},sniper:{name:"Sniper",damage:50,fireRate:1e3,bulletSpeed:800,bulletSize:5,bulletCount:1,spread:0,penetration:!0,color:16711935},laser:{name:"Laser",damage:20,fireRate:150,bulletSpeed:700,bulletSize:4,bulletCount:1,spread:0,penetration:!0,color:16711782}};var m=(l=>(l.SPEED_BOOST="speed_boost",l.DAMAGE_UP="damage_up",l.MAX_HP_UP="max_hp_up",l.FIRE_RATE_UP="fire_rate_up",l.ARMOR="armor",l))(m||{});const M={speed_boost:{name:"Speed Boost",description:"Increases movement speed",effect:30,color:16776960,dropChance:.15},damage_up:{name:"Damage Up",description:"Increases weapon damage",effect:.2,color:16711782,dropChance:.15},max_hp_up:{name:"Max HP Up",description:"Increases maximum health",effect:30,color:65280,dropChance:.12},fire_rate_up:{name:"Fire Rate Up",description:"Increases fire rate",effect:.15,color:65535,dropChance:.1},armor:{name:"Armor",description:"Reduces damage taken",effect:.1,color:11184810,dropChance:.08}},x={INITIAL_ENEMY_COUNT:8,DEBUG_MODE:!1,CREDIT_DROP_CHANCE:.3},b={CREDIT_VALUE:5,CREDIT_COLOR:16776960},r={WIDTH:2400,HEIGHT:1600,WALL_COUNT:30,WALL_MIN_SIZE:40,WALL_MAX_SIZE:120,SAFE_ZONE_RADIUS:300};class _ extends h.GameObjects.Graphics{constructor(t,e,s,i,a,o,p,u,E){super(t),this.hitCount=0,this.maxHits=1,this.x=e,this.y=s,this.damage=o!==void 0?o:I.DAMAGE,this.bulletSize=p!==void 0?p:I.SIZE,this.penetration=E!==void 0?E:!1,this.penetration&&(this.maxHits=3);const f=u!==void 0?u:y.BULLET;this.fillStyle(f,1),this.fillCircle(0,0,this.bulletSize),this.penetration&&(this.lineStyle(2,f,.5),this.strokeCircle(0,0,this.bulletSize+2)),t.add.existing(this),t.physics.add.existing(this),this.body.setVelocity(i,a),this.body.setCircle(this.bulletSize),this.lifeTimer=t.time.delayedCall(I.LIFETIME,()=>{this.destroy()})}onHit(){return this.hitCount++,!this.penetration||this.hitCount>=this.maxHits?(this.destroy(),!0):!1}destroy(t){this.lifeTimer&&this.lifeTimer.destroy(),super.destroy(t)}}class A{constructor(t,e){this.lastFireTime=0,this.scene=t,this.type=e,this.config=N[e],this.bullets=t.add.group({classType:_,runChildUpdate:!1})}canFire(t){return t-this.lastFireTime>=this.config.fireRate}fire(t,e,s,i){const a=this.scene.time.now;if(!this.canFire(a))return;this.lastFireTime=a;const o=h.Math.Angle.Between(t,e,s,i);for(let p=0;p<this.config.bulletCount;p++){let u=o;if(this.config.bulletCount>1){const R=this.config.spread*(p-(this.config.bulletCount-1)/2);u+=R}const E=Math.cos(u)*this.config.bulletSpeed,f=Math.sin(u)*this.config.bulletSpeed,T=new _(this.scene,t,e,E,f,this.config.damage,this.config.bulletSize,this.config.color,this.config.penetration);this.bullets.add(T)}}getBullets(){return this.bullets}destroy(){this.bullets.clear(!0,!0)}}class U extends h.GameObjects.Graphics{constructor(t,e,s){super(t),this.x=e,this.y=s,this.health=c.MAX_HEALTH,this.maxHealth=c.MAX_HEALTH,this.level=c.INITIAL_LEVEL,this.exp=0,this.expToNextLevel=c.EXP_TO_NEXT_LEVEL_BASE,this.speed=c.SPEED,this.baseDamage=15,this.damageMultiplier=1,this.drawPlayer(),t.add.existing(this),t.physics.add.existing(this),this.body.setCollideWorldBounds(!0),this.body.setSize(c.SIZE*2,c.SIZE*2),this.body.setOffset(-20,-20),this.weapons=new Map,this.unlockedWeapons=[d.PISTOL];const i=new A(t,d.PISTOL);this.weapons.set(d.PISTOL,i),this.currentWeapon=i,this.items=[],this.speedBonus=0,this.damageBonus=0,this.fireRateBonus=0,this.armor=0}drawPlayer(){this.clear(),this.fillStyle(y.PLAYER,1),this.lineStyle(2,y.PLAYER,1),this.beginPath(),this.moveTo(0,-20),this.lineTo(-20,c.SIZE),this.lineTo(c.SIZE,c.SIZE),this.closePath(),this.fillPath(),this.strokePath()}update(t,e){let s=0,i=0;t.left.isDown||e.a.isDown?s=-this.speed:(t.right.isDown||e.d.isDown)&&(s=this.speed),t.up.isDown||e.w.isDown?i=-this.speed:(t.down.isDown||e.s.isDown)&&(i=this.speed),s!==0&&i!==0&&(s*=.707,i*=.707),this.body.setVelocity(s,i)}aimAndRotate(t){const e=h.Math.Angle.Between(this.x,this.y,t.worldX,t.worldY);this.rotation=e+Math.PI/2}shoot(t){this.currentWeapon.fire(this.x,this.y,t.worldX,t.worldY)}getBullets(){return this.currentWeapon.getBullets()}switchWeapon(t){if(!this.unlockedWeapons.includes(t))return!1;if(!this.weapons.has(t)){const e=new A(this.scene,t);this.weapons.set(t,e)}return this.currentWeapon=this.weapons.get(t),!0}unlockWeapon(t){this.unlockedWeapons.includes(t)||this.unlockedWeapons.push(t)}getCurrentWeapon(){return this.currentWeapon}getUnlockedWeapons(){return this.unlockedWeapons}takeDamage(t){const e=t*(1-this.armor);this.health=Math.max(0,this.health-e),this.scene.tweens.add({targets:this,alpha:.5,duration:100,yoyo:!0,repeat:2}),this.health<=0&&this.onDeath()}pickupItem(t){this.items.push(t),this.applyItemEffect(t)}applyItemEffect(t){const s=require("@/utils/Constants").ITEMS[t];switch(t){case m.SPEED_BOOST:this.speedBonus+=s.effect,this.speed+=s.effect;break;case m.DAMAGE_UP:this.damageBonus+=s.effect,this.damageMultiplier+=s.effect;break;case m.MAX_HP_UP:this.maxHealth+=s.effect,this.health+=s.effect;break;case m.FIRE_RATE_UP:this.fireRateBonus+=s.effect;break;case m.ARMOR:this.armor+=s.effect,this.armor=Math.min(this.armor,.5);break}}getItems(){return this.items}onDeath(){console.log("Player died!")}getHealthPercentage(){return this.health/this.maxHealth}gainExp(t){for(this.exp+=t;this.exp>=this.expToNextLevel;)this.levelUp()}levelUp(){this.exp-=this.expToNextLevel,this.level++,this.expToNextLevel=Math.floor(c.EXP_TO_NEXT_LEVEL_BASE*Math.pow(c.EXP_MULTIPLIER,this.level-1)),this.maxHealth+=c.LEVEL_UP_HP_GAIN,this.health=this.maxHealth,this.damageMultiplier+=c.LEVEL_UP_DAMAGE_MULTIPLIER,this.speed+=c.LEVEL_UP_SPEED_GAIN,this.showLevelUpEffect(),console.log(`Level Up! Now Level ${this.level}`)}showLevelUpEffect(){this.scene.tweens.add({targets:this,scale:1.3,alpha:.7,duration:200,yoyo:!0,repeat:2});const t=this.scene.add.text(this.x,this.y-50,"LEVEL UP!",{fontSize:"24px",color:"#00ffff",fontStyle:"bold"});t.setOrigin(.5),this.scene.tweens.add({targets:t,y:t.y-30,alpha:0,duration:1e3,onComplete:()=>{t.destroy()}})}getExpPercentage(){return this.exp/this.expToNextLevel}getCurrentDamage(){return Math.floor(this.baseDamage*this.damageMultiplier)}}class C extends h.GameObjects.Graphics{constructor(t,e,s,i,a,o){super(t),this.x=e,this.y=s,this.damage=o,this.fillStyle(y.ENEMY,1),this.fillCircle(0,0,5),t.add.existing(this),t.physics.add.existing(this),this.body.setVelocity(i,a),this.body.setCircle(5),this.lifeTimer=t.time.delayedCall(3e3,()=>{this.destroy()})}destroy(t){this.lifeTimer&&this.lifeTimer.destroy(),super.destroy(t)}}class P extends h.GameObjects.Graphics{constructor(t,e,s,i,a=n.CHASER){super(t),this.lastShootTime=0,this.x=e,this.y=s,this.player=i,this.enemyType=a;const o=k[a];this.speed=o.speed,this.health=o.health,this.maxHealth=o.health,this.damage=o.damage,this.size=o.size,this.color=o.color,this.scoreValue=o.score,a===n.SHOOTER&&(this.bullets=t.add.group({classType:C,runChildUpdate:!1})),this.drawEnemy(),t.add.existing(this),t.physics.add.existing(this),this.body.setSize(this.size*2,this.size*2),this.body.setOffset(-this.size,-this.size)}drawEnemy(){switch(this.clear(),this.fillStyle(this.color,1),this.lineStyle(2,this.color,1),this.enemyType){case n.CHASER:this.fillRect(-this.size,-this.size,this.size*2,this.size*2),this.strokeRect(-this.size,-this.size,this.size*2,this.size*2);break;case n.SHOOTER:this.drawHexagon();break;case n.SPEEDY:this.beginPath(),this.moveTo(0,-this.size),this.lineTo(-this.size,this.size),this.lineTo(this.size,this.size),this.closePath(),this.fillPath(),this.strokePath();break;case n.TANK:this.drawOctagon();break}}drawHexagon(){this.beginPath();for(let t=0;t<6;t++){const e=Math.PI/3*t,s=Math.cos(e)*this.size,i=Math.sin(e)*this.size;t===0?this.moveTo(s,i):this.lineTo(s,i)}this.closePath(),this.fillPath(),this.strokePath()}drawOctagon(){this.beginPath();for(let t=0;t<8;t++){const e=Math.PI/4*t,s=Math.cos(e)*this.size,i=Math.sin(e)*this.size;t===0?this.moveTo(s,i):this.lineTo(s,i)}this.closePath(),this.fillPath(),this.strokePath()}update(){if(!this.player||this.player.health<=0){this.body.setVelocity(0,0);return}const t=h.Math.Distance.Between(this.x,this.y,this.player.x,this.player.y),e=h.Math.Angle.Between(this.x,this.y,this.player.x,this.player.y);switch(this.enemyType){case n.CHASER:case n.SPEEDY:case n.TANK:const s=Math.cos(e)*this.speed,i=Math.sin(e)*this.speed;this.body.setVelocity(s,i),this.rotation=e;break;case n.SHOOTER:if(t>S.SHOOT_RANGE+50){const a=Math.cos(e)*this.speed,o=Math.sin(e)*this.speed;this.body.setVelocity(a,o)}else if(t<S.SHOOT_RANGE-50){const a=-Math.cos(e)*this.speed,o=-Math.sin(e)*this.speed;this.body.setVelocity(a,o)}else this.body.setVelocity(0,0);this.rotation=e,t<=S.SHOOT_RANGE&&this.shoot();break}}shoot(){const t=this.scene.time.now;if(t-this.lastShootTime<S.SHOOT_COOLDOWN)return;this.lastShootTime=t;const e=h.Math.Angle.Between(this.x,this.y,this.player.x,this.player.y),s=Math.cos(e)*300,i=Math.sin(e)*300,a=new C(this.scene,this.x,this.y,s,i,this.damage);this.bullets&&this.bullets.add(a)}getBullets(){return this.bullets}takeDamage(t){this.health-=t,this.scene.tweens.add({targets:this,alpha:.5,duration:50,yoyo:!0}),this.health<=0&&this.destroy()}getDamage(){return this.damage}destroy(t){this.bullets&&this.bullets.clear(!0,!0),super.destroy(t)}}class H extends h.GameObjects.Graphics{constructor(t,e,s,i){super(t),this.x=e,this.y=s,this.itemType=i,this.config=M[i],this.drawItem(),t.add.existing(this),t.physics.add.existing(this),this.body.setSize(20,20),this.body.setOffset(-10,-10),t.tweens.add({targets:this,y:this.y-10,duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),t.tweens.add({targets:this,rotation:Math.PI*2,duration:3e3,repeat:-1,ease:"Linear"})}drawItem(){this.clear(),this.fillStyle(this.config.color,1),this.lineStyle(2,this.config.color,1),this.beginPath(),this.moveTo(0,-10),this.lineTo(10,0),this.lineTo(0,10),this.lineTo(-10,0),this.closePath(),this.fillPath(),this.strokePath(),this.fillStyle(16777215,.5),this.beginPath(),this.moveTo(0,-5),this.lineTo(5,0),this.lineTo(0,5),this.lineTo(-5,0),this.closePath(),this.fillPath()}}class O extends h.GameObjects.Graphics{constructor(t,e,s){super(t),this.x=e,this.y=s,this.value=b.CREDIT_VALUE,this.drawCredit(),t.add.existing(this),t.physics.add.existing(this),this.body.setSize(16,16),this.body.setOffset(-8,-8),t.tweens.add({targets:this,y:this.y-8,duration:800,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),t.tweens.add({targets:this,scale:1.2,duration:600,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}drawCredit(){this.clear(),this.fillStyle(b.CREDIT_COLOR,1),this.lineStyle(2,16755200,1),this.fillCircle(0,0,8),this.strokeCircle(0,0,8),this.fillStyle(16755200,1),this.fillCircle(0,0,4)}}class g extends h.GameObjects.Graphics{constructor(t,e,s,i,a){super(t),this.x=e,this.y=s,this.wallWidth=i,this.wallHeight=a,this.drawWall(),t.add.existing(this),t.physics.add.existing(this,!0),this.body.setSize(i,a),this.body.setOffset(-i/2,-a/2)}drawWall(){this.clear(),this.fillStyle(y.WALL,1),this.fillRect(-this.wallWidth/2,-this.wallHeight/2,this.wallWidth,this.wallHeight),this.lineStyle(2,y.WALL_OUTLINE,1),this.strokeRect(-this.wallWidth/2,-this.wallHeight/2,this.wallWidth,this.wallHeight),this.lineStyle(1,y.WALL_OUTLINE,.5),this.beginPath(),this.moveTo(-this.wallWidth/2+5,-this.wallHeight/2+5),this.lineTo(this.wallWidth/2-5,-this.wallHeight/2+5),this.strokePath()}}class G{constructor(t){this.scene=t,this.walls=t.add.group()}generateMap(t,e){this.walls.clear(!0,!0);for(let s=0;s<r.WALL_COUNT;s++){let i,a,o,p,u=0;const E=50;do if(i=h.Math.Between(100,r.WIDTH-100),a=h.Math.Between(100,r.HEIGHT-100),o=h.Math.Between(r.WALL_MIN_SIZE,r.WALL_MAX_SIZE),p=h.Math.Between(r.WALL_MIN_SIZE,r.WALL_MAX_SIZE),u++,u>=E)break;while(this.isInSafeZone(i,a,t,e));const f=new g(this.scene,i,a,o,p);this.walls.add(f)}return this.createBoundaryWalls(),this.walls}isInSafeZone(t,e,s,i){return h.Math.Distance.Between(t,e,s,i)<r.SAFE_ZONE_RADIUS}createBoundaryWalls(){const e=new g(this.scene,r.WIDTH/2,25,r.WIDTH,50);this.walls.add(e);const s=new g(this.scene,r.WIDTH/2,r.HEIGHT-50/2,r.WIDTH,50);this.walls.add(s);const i=new g(this.scene,50/2,r.HEIGHT/2,50,r.HEIGHT);this.walls.add(i);const a=new g(this.scene,r.WIDTH-50/2,r.HEIGHT/2,50,r.HEIGHT);this.walls.add(a)}getWalls(){return this.walls}}class z extends h.Scene{constructor(){super({key:"GameScene"}),this.score=0,this.currentCredits=0,this.totalCredits=0}create(){this.physics.world.setBounds(0,0,r.WIDTH,r.HEIGHT),this.player=new U(this,r.WIDTH/2,r.HEIGHT/2),this.mapGenerator=new G(this),this.walls=this.mapGenerator.generateMap(this.player.x,this.player.y),this.cameras.main.setBounds(0,0,r.WIDTH,r.HEIGHT),this.cameras.main.startFollow(this.player,!0,.1,.1),this.cameras.main.setZoom(1),this.enemies=this.add.group({classType:P,runChildUpdate:!0}),this.items=this.add.group({classType:H,runChildUpdate:!1}),this.credits=this.add.group({classType:O,runChildUpdate:!1}),this.loadTotalCredits(),this.spawnEnemies(x.INITIAL_ENEMY_COUNT),this.cursors=this.input.keyboard.createCursorKeys(),this.wasd={w:this.input.keyboard.addKey(h.Input.Keyboard.KeyCodes.W),a:this.input.keyboard.addKey(h.Input.Keyboard.KeyCodes.A),s:this.input.keyboard.addKey(h.Input.Keyboard.KeyCodes.S),d:this.input.keyboard.addKey(h.Input.Keyboard.KeyCodes.D)},this.input.keyboard.on("keydown-SPACE",()=>{this.player.shoot(this.input.activePointer)}),this.input.on("pointerdown",()=>{this.player.shoot(this.input.activePointer)}),this.input.keyboard.on("keydown-ONE",()=>this.player.switchWeapon(d.PISTOL)),this.input.keyboard.on("keydown-TWO",()=>this.player.switchWeapon(d.SHOTGUN)),this.input.keyboard.on("keydown-THREE",()=>this.player.switchWeapon(d.RIFLE)),this.input.keyboard.on("keydown-FOUR",()=>this.player.switchWeapon(d.SNIPER)),this.input.keyboard.on("keydown-FIVE",()=>this.player.switchWeapon(d.LASER)),this.player.unlockWeapon(d.SHOTGUN),this.player.unlockWeapon(d.RIFLE),this.player.unlockWeapon(d.SNIPER),this.player.unlockWeapon(d.LASER),this.setupCollisions(),this.events.on("updateScore",this.updateScore,this)}update(){this.player.update(this.cursors,this.wasd),this.player.aimAndRotate(this.input.activePointer),this.enemies.getLength()<x.INITIAL_ENEMY_COUNT&&this.spawnEnemies(1),this.events.emit("updateUI",{health:this.player.health,maxHealth:this.player.maxHealth,score:this.score,level:this.player.level,exp:this.player.exp,expToNextLevel:this.player.expToNextLevel,currentWeapon:this.player.getCurrentWeapon().config.name,credits:this.currentCredits,totalCredits:this.totalCredits})}setupCollisions(){this.physics.add.collider(this.player,this.walls),this.physics.add.collider(this.enemies,this.walls),this.physics.add.collider(this.player.getBullets(),this.walls,t=>{t.destroy()}),this.physics.add.overlap(this.player.getBullets(),this.enemies,this.bulletHitEnemy,void 0,this),this.physics.add.overlap(this.player,this.enemies,this.playerHitEnemy,void 0,this),this.physics.add.overlap(this.player,this.items,this.playerPickupItem,void 0,this),this.physics.add.overlap(this.player,this.credits,this.playerPickupCredit,void 0,this)}setupEnemyBulletCollisions(t){const e=t.getBullets();e&&(this.physics.add.overlap(this.player,e,this.enemyBulletHitPlayer,void 0,this),this.physics.add.collider(e,this.walls,s=>{s.destroy()}))}bulletHitEnemy(t,e){const s=t,i=e;i.takeDamage(s.damage),s.onHit(),i.health<=0&&(this.score+=i.scoreValue,this.player.gainExp(i.scoreValue),this.tryDropItem(i.x,i.y),this.tryDropCredit(i.x,i.y))}tryDropItem(t,e){const s=Object.values(m);for(const i of s){const a=M[i];if(Math.random()<a.dropChance){const o=new H(this,t,e,i);this.items.add(o);break}}}playerPickupItem(t,e){const s=e;this.player.pickupItem(s.itemType),this.tweens.add({targets:s,alpha:0,scale:1.5,duration:200,onComplete:()=>{s.destroy()}})}enemyBulletHitPlayer(t,e){const s=e;this.player.takeDamage(s.damage),s.destroy(),this.player.health<=0&&this.gameOver()}playerHitEnemy(t,e){const s=e;this.player.takeDamage(s.getDamage()),s.destroy(),this.player.health<=0&&this.gameOver()}spawnEnemies(t){for(let e=0;e<t;e++){const s=h.Math.FloatBetween(0,Math.PI*2),i=S.SPAWN_DISTANCE,a=this.player.x+Math.cos(s)*i,o=this.player.y+Math.sin(s)*i,p=h.Math.Clamp(a,50,r.WIDTH-50),u=h.Math.Clamp(o,50,r.HEIGHT-50),E=[n.CHASER,n.SHOOTER,n.SPEEDY,n.TANK],f=h.Utils.Array.GetRandom(E),T=new P(this,p,u,this.player,f);this.enemies.add(T),f===n.SHOOTER&&this.setupEnemyBulletCollisions(T)}}tryDropCredit(t,e){if(Math.random()<x.CREDIT_DROP_CHANCE){const s=new O(this,t,e);this.credits.add(s)}}playerPickupCredit(t,e){const s=e;this.currentCredits+=s.value,this.totalCredits+=s.value,this.saveTotalCredits(),this.tweens.add({targets:s,y:s.y-30,alpha:0,duration:300,onComplete:()=>{s.destroy()}})}loadTotalCredits(){const t=localStorage.getItem("totalCredits");this.totalCredits=t?parseInt(t):0}saveTotalCredits(){localStorage.setItem("totalCredits",this.totalCredits.toString())}updateScore(t){this.score=t}gameOver(){console.log("Game Over! Final Score:",this.score),this.physics.pause();const t=this.add.text(w/2,L/2,`GAME OVER
Press R to Restart`,{fontSize:"48px",color:"#ff0066",align:"center"});t.setOrigin(.5),t.setScrollFactor(0);const e=this.add.text(w/2,L/2+80,`Score: ${this.score}`,{fontSize:"32px",color:"#00ffff",align:"center"});e.setOrigin(.5),e.setScrollFactor(0),this.input.keyboard.once("keydown-R",()=>{this.scene.restart()})}}class V extends h.Scene{constructor(){super({key:"UIScene",active:!1})}create(){this.healthBarBg=this.add.graphics(),this.healthBarBg.fillStyle(y.HEALTH_BAR_BG,1),this.healthBarBg.fillRect(20,20,200,20),this.healthBar=this.add.graphics(),this.healthText=this.add.text(20,45,"HP: 100/100",{fontSize:"16px",color:"#00ffff"}),this.levelText=this.add.text(20,70,"Level: 1",{fontSize:"20px",color:"#ffff00",fontStyle:"bold"}),this.expBarBg=this.add.graphics(),this.expBarBg.fillStyle(y.HEALTH_BAR_BG,1),this.expBarBg.fillRect(20,95,200,15),this.expBar=this.add.graphics(),this.expText=this.add.text(20,115,"EXP: 0/100",{fontSize:"14px",color:"#ffff00"}),this.scoreText=this.add.text(20,140,"Score: 0",{fontSize:"20px",color:"#00ffff"}),this.weaponText=this.add.text(20,170,"Weapon: Pistol",{fontSize:"18px",color:"#00ff00",fontStyle:"bold"}),this.creditText=this.add.text(20,200,"Credits: 0",{fontSize:"16px",color:"#ffff00"}),this.totalCreditText=this.add.text(20,220,"Total Credits: 0",{fontSize:"14px",color:"#ffaa00"}),this.add.text(20,250,"WASD: Move | Mouse: Aim | Space/Click: Shoot | 1-5: Weapon",{fontSize:"14px",color:"#666666"}),this.scene.get("GameScene").events.on("updateUI",this.updateUI,this)}updateUI(t){const e=t.health/t.maxHealth;this.healthBar.clear(),this.healthBar.fillStyle(y.HEALTH_BAR,1),this.healthBar.fillRect(20,20,200*e,20),this.healthText.setText(`HP: ${Math.max(0,Math.floor(t.health))}/${t.maxHealth}`),this.levelText.setText(`Level: ${t.level}`);const s=t.exp/t.expToNextLevel;this.expBar.clear(),this.expBar.fillStyle(16776960,1),this.expBar.fillRect(20,95,200*s,15),this.expText.setText(`EXP: ${Math.floor(t.exp)}/${t.expToNextLevel}`),this.scoreText.setText(`Score: ${t.score}`),this.weaponText.setText(`Weapon: ${t.currentWeapon}`),this.creditText.setText(`Credits: ${t.credits}`),this.totalCreditText.setText(`Total Credits: ${t.totalCredits}`)}}const X={type:h.AUTO,width:w,height:L,parent:"game-container",backgroundColor:y.BACKGROUND,physics:{default:"arcade",arcade:{gravity:{x:0,y:0},debug:x.DEBUG_MODE}},scene:[W,z,V],scale:{mode:h.Scale.FIT,autoCenter:h.Scale.CENTER_BOTH}};new h.Game(X);console.log("サイバーパンク・ローグライトシューター - 起動");console.log("Phaser version:",h.VERSION);
